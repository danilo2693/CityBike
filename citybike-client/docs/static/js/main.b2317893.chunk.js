(this["webpackJsonpcitybike-client"]=this["webpackJsonpcitybike-client"]||[]).push([[0],{118:function(t,e){},125:function(t,e,a){"use strict";a.r(e);var n=a(0),c=a.n(n),i=a(24),s=a.n(i),o=(a(72),a(12)),r=a(6),l=a(39),j=a.n(l),b=a(64),d=a(14),m=a(65),h=a.n(m),u=a(128),O=a(129),f=a(127),p=a(130),x=a(7),v=a(1),N=function(t){var e=t.position,a=t.stations,n=t.zoom,c=new x.Icon({iconSize:[20,20],iconUrl:"".concat("/CityBike","/bike.png")});return Object(v.jsxs)(u.a,{center:e,zoom:n,className:"card",children:[Object(v.jsx)(O.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a&&a.length>0&&a.map((function(t){return Object(v.jsx)(f.a,{position:[t.latitude,t.longitude],icon:c,children:Object(v.jsxs)(p.a,{children:[Object(v.jsxs)("h6",{children:["Name station: ",t.name]}),Object(v.jsx)("hr",{}),Object(v.jsxs)("div",{className:"text-center",children:[Object(v.jsxs)("p",{children:["Empty slots: ",t.empty_slots]}),Object(v.jsxs)("p",{children:["Free bikes: ",t.free_bikes]})]})]})},t.id)}))]})},g=a(66),y=a.n(g).a.connect("https://app-citybike.herokuapp.com"),k=c.a.createContext(),_=a(67),w=function(){var t=function(){return JSON.parse(localStorage.getItem("stationsHistory")?localStorage.getItem("stationsHistory"):[])};return{getStations:t,addStations:function(e){var a=t();try{localStorage.setItem("stationsHistory",JSON.stringify([].concat(Object(_.a)(a),[{date:new Date,stations:e}])))}catch(n){console.error("Local storage is full"),localStorage.setItem("stationsHistory",JSON.stringify([{date:new Date,stations:e}]))}},reset:function(){localStorage.setItem("stationsHistory",JSON.stringify([]))}}},S=function(){var t=Object(n.useContext)(k),e="".concat("https://app-citybike.herokuapp.com","/cityBikeInformation"),a=Object(n.useState)({lat:51.505,lng:-.09,locationName:"",cityName:""}),c=Object(d.a)(a,2),i=c[0],s=c[1],o=Object(n.useState)([]),r=Object(d.a)(o,2),l=r[0],m=r[1],u=Object(n.useState)(!1),O=Object(d.a)(u,2),f=O[0],p=O[1],x=Object(n.useState)(!1),g=Object(d.a)(x,2),y=g[0],_=g[1],S=w().addStations,I=function(t){_(t)};Object(n.useEffect)((function(){M()}),[]);var M=function(){var t=Object(b.a)(j.a.mark((function t(){var a,n,c,i,o;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.get(e);case 2:a=t.sent,n=a.data,c=n.location,i=n.name,o=n.stations,s({lat:c.latitude,lng:c.longitude,locationName:c.city,cityName:i}),m(o),p(!0);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){if(f&&l)return t.on("city-bike-stations",(function(t){m(t),S(t)})),function(){return t.off("city-bike-stations")}}),[f]);var D=[i.lat,i.lng];return Object(v.jsxs)("div",{className:"card p-4 map animate__animated animate__fadeIn",children:[""!==i.cityName&&Object(v.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(v.jsxs)("h1",{className:"mb-4",children:[i.cityName," - ",i.locationName]}),Object(v.jsxs)("div",{className:"information-container",children:[Object(v.jsx)("span",{className:"pointer material-icons information-icon ",onMouseOver:function(){return I(!0)},onMouseLeave:function(){return I(!1)},children:"information"}),y&&Object(v.jsxs)("div",{className:"information-content animate__animated animate__fadeInLeft",children:[Object(v.jsx)("h3",{className:"mb-0",children:"Show availability"}),Object(v.jsx)("p",{className:"mt-4",children:"To see availability, click on a bike on the map"})]})]})]}),Object(v.jsx)(N,{position:D,stations:l,zoom:13})]})},I=a(30),M=a.n(I),D=function(){var t=w(),e=t.getStations,a=t.addStations,c=Object(n.useContext)(k),i=Object(n.useState)(e()),s=Object(d.a)(i,2),r=s[0],l=s[1];return Object(n.useEffect)((function(){return c.on("city-bike-stations",(function(t){a(t),l(e())})),function(){return c.off("city-bike-stations")}}),[]),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"card p-4",children:[Object(v.jsx)("h1",{className:"mb-4 animate__animated animate__fadeIn",children:"History bikes"}),Object(v.jsx)("div",{className:"scrolled-table animate__animated animate__fadeIn",children:Object(v.jsxs)("table",{className:"table mt-4",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"fixed-th border-bottom",children:[Object(v.jsx)("th",{scope:"col",children:"#"}),Object(v.jsx)("th",{scope:"col",children:"Date"}),Object(v.jsx)("th",{scope:"col",children:"Action"})]})}),Object(v.jsx)("tbody",{children:r.map((function(t,e){return Object(v.jsxs)("tr",{className:"animate__animated animate__fadeIn",children:[Object(v.jsx)("td",{children:e}),Object(v.jsx)("td",{children:M()(t.date).format("MMMM DD YYYY, h:mm:ss a")}),Object(v.jsx)("td",{children:Object(v.jsx)(o.b,{className:"nav-link",activeClassName:"active",to:"/selected-date/".concat(t.date),children:Object(v.jsx)("span",{className:"material-icons",children:"visibility"})})})]},e)}))})]})})]})})},C=function(t){var e=t.match.params.date,a=(0,w().getStations)().find((function(t){return t.date===e})),n=a?a.stations:[];return Object(v.jsxs)("div",{className:"card p-4 map animate__animated animate__fadeIn",children:[""!==e&&Object(v.jsxs)("div",{className:"d-flex justify-content-start align-items-center mb-4",children:[Object(v.jsx)(o.b,{className:"btn btn-primary me-2",activeClassName:"active",to:"/history-bikes",children:"Back"}),Object(v.jsx)("h1",{children:M()(e).format("MMMM DD YYYY, h:mm:ss a")})]}),Object(v.jsx)(N,{position:[25.790654,-80.1300455],stations:n,zoom:13})]})},H=function(){var t=w().reset;return Object(n.useEffect)((function(){t()}),[]),Object(v.jsxs)("div",{className:"container mt-4",children:[Object(v.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-info bg-gradient mb-4",children:Object(v.jsxs)("div",{className:"container-fluid",children:[Object(v.jsx)("a",{className:"navbar-brand",href:"#",children:"CityBike"}),Object(v.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(v.jsx)("span",{className:"navbar-toggler-icon"})}),Object(v.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavDropdown",children:Object(v.jsxs)("ul",{className:"navbar-nav",children:[Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(o.b,{className:"nav-link",activeClassName:"active",to:"/",children:"Home"})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(o.b,{className:"nav-link",activeClassName:"active",to:"/history-bikes",children:"History"})})]})})]})}),Object(v.jsxs)(r.c,{children:[Object(v.jsx)(r.a,{exact:!0,path:"/",component:S}),Object(v.jsx)(r.a,{path:"/history-bikes",component:D}),Object(v.jsx)(r.a,{path:"/selected-date/:date",component:C})]}),Object(v.jsxs)("div",{className:"mt-4 mb-4 animate__animated animate__fadeIn",children:["Icons made by"," ",Object(v.jsx)("a",{href:"https://www.freepik.com",title:"Freepik",children:"Freepik"})," ","from"," ",Object(v.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(v.jsx)(k.Provider,{value:y,children:Object(v.jsx)(o.a,{children:Object(v.jsx)(H,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},72:function(t,e,a){}},[[125,1,2]]]);
//# sourceMappingURL=main.b2317893.chunk.js.map