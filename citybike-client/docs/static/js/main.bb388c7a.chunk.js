(this["webpackJsonpcitybike-client"]=this["webpackJsonpcitybike-client"]||[]).push([[0],{118:function(t,e){},125:function(t,e,a){"use strict";a.r(e);var n=a(0),c=a.n(n),s=a(24),i=a.n(s),o=(a(72),a(12)),r=a(6),l=a(39),b=a.n(l),j=a(64),d=a(16),m=a(65),h=a.n(m),u=a(128),O=a(129),p=a(127),f=a(130),x=a(7),v=a(1),g=function(t){var e=t.position,a=t.stations,n=t.zoom,c=new x.Icon({iconSize:[20,20],iconUrl:"".concat("/CityBike","/bike.png")});return Object(v.jsxs)(u.a,{center:e,zoom:n,className:"card",children:[Object(v.jsx)(O.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a&&a.length>0&&a.map((function(t){return Object(v.jsx)(p.a,{position:[t.latitude,t.longitude],icon:c,children:Object(v.jsxs)(f.a,{children:[Object(v.jsxs)("h6",{children:["Name station: ",t.name]}),Object(v.jsx)("hr",{}),Object(v.jsxs)("div",{className:"text-center",children:[Object(v.jsxs)("p",{children:["Empty slots: ",t.empty_slots]}),Object(v.jsxs)("p",{children:["Free bikes: ",t.free_bikes]})]})]})},t.id)}))]})},N=a(66),y=a.n(N).a.connect("https://app-citybike.herokuapp.com"),k=c.a.createContext(),_=a(67),w=function(){var t=function(){return JSON.parse(localStorage.getItem("stationsHistory")?localStorage.getItem("stationsHistory"):[])};return{getStations:t,addStations:function(e){var a=t();try{localStorage.setItem("stationsHistory",JSON.stringify([].concat(Object(_.a)(a),[{date:new Date,stations:e}])))}catch(n){console.error("Local storage is full"),localStorage.setItem("stationsHistory",JSON.stringify([{date:new Date,stations:e}]))}},reset:function(){localStorage.setItem("stationsHistory",JSON.stringify([]))}}},S=function(){var t=Object(n.useContext)(k),e="".concat("https://app-citybike.herokuapp.com","/cityBikeInformation"),a=Object(n.useState)({lat:51.505,lng:-.09,locationName:"",cityName:""}),c=Object(d.a)(a,2),s=c[0],i=c[1],o=Object(n.useState)([]),r=Object(d.a)(o,2),l=r[0],m=r[1],u=Object(n.useState)(!1),O=Object(d.a)(u,2),p=O[0],f=O[1],x=w().addStations;Object(n.useEffect)((function(){N()}),[]);var N=function(){var t=Object(j.a)(b.a.mark((function t(){var a,n,c,s,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.get(e);case 2:a=t.sent,n=a.data,c=n.location,s=n.name,o=n.stations,i({lat:c.latitude,lng:c.longitude,locationName:c.city,cityName:s}),m(o),f(!0);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){if(p&&l)return t.on("city-bike-stations",(function(t){m(t),x(t)})),function(){return t.off("city-bike-stations")}}),[p]);var y=[s.lat,s.lng];return Object(v.jsxs)("div",{className:"card p-4 map animate__animated animate__fadeIn",children:[""!==s.cityName&&Object(v.jsxs)("h1",{className:"mb-4",children:[s.cityName," - ",s.locationName]}),Object(v.jsx)(g,{position:y,stations:l,zoom:13})]})},I=a(30),D=a.n(I),C=function(){var t=w(),e=t.getStations,a=t.addStations,c=Object(n.useContext)(k),s=Object(n.useState)(e()),i=Object(d.a)(s,2),r=i[0],l=i[1];return Object(n.useEffect)((function(){return c.on("city-bike-stations",(function(t){a(t),l(e())})),function(){return c.off("city-bike-stations")}}),[]),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"card p-4",children:[Object(v.jsx)("h1",{className:"mb-4 animate__animated animate__fadeIn",children:"History bikes"}),Object(v.jsx)("div",{className:"scrolled-table animate__animated animate__fadeIn",children:Object(v.jsxs)("table",{className:"table mt-4",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{className:"fixed-th border-bottom",children:[Object(v.jsx)("th",{scope:"col",children:"#"}),Object(v.jsx)("th",{scope:"col",children:"Date"}),Object(v.jsx)("th",{scope:"col",children:"Action"})]})}),Object(v.jsx)("tbody",{children:r.map((function(t,e){return Object(v.jsxs)("tr",{className:"animate__animated animate__fadeIn",children:[Object(v.jsx)("td",{children:e}),Object(v.jsx)("td",{children:D()(t.date).format("MMMM DD YYYY, h:mm:ss a")}),Object(v.jsx)("td",{children:Object(v.jsx)(o.b,{className:"nav-link",activeClassName:"active",to:"/selected-date/".concat(t.date),children:Object(v.jsx)("span",{className:"material-icons",children:"visibility"})})})]},e)}))})]})})]})})},M=function(t){var e=t.match.params.date,a=(0,w().getStations)().find((function(t){return t.date===e})),n=a?a.stations:[];return Object(v.jsxs)("div",{className:"card p-4 map animate__animated animate__fadeIn",children:[""!==e&&Object(v.jsxs)("div",{className:"d-flex justify-content-start align-items-center mb-4",children:[Object(v.jsx)(o.b,{className:"btn btn-primary me-2",activeClassName:"active",to:"/history-bikes",children:"Back"}),Object(v.jsx)("h1",{children:D()(e).format("MMMM DD YYYY, h:mm:ss a")})]}),Object(v.jsx)(g,{position:[25.790654,-80.1300455],stations:n,zoom:13})]})},H=function(){var t=w().reset;return Object(n.useEffect)((function(){t()}),[]),Object(v.jsxs)("div",{className:"container mt-4",children:[Object(v.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-info bg-gradient mb-4",children:Object(v.jsxs)("div",{className:"container-fluid",children:[Object(v.jsx)("a",{className:"navbar-brand",href:"#",children:"CityBike"}),Object(v.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(v.jsx)("span",{className:"navbar-toggler-icon"})}),Object(v.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavDropdown",children:Object(v.jsxs)("ul",{className:"navbar-nav",children:[Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(o.b,{className:"nav-link",activeClassName:"active",to:"/",children:"Home"})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(o.b,{className:"nav-link",activeClassName:"active",to:"/history-bikes",children:"History"})})]})})]})}),Object(v.jsxs)(r.c,{children:[Object(v.jsx)(r.a,{exact:!0,path:"/",component:S}),Object(v.jsx)(r.a,{path:"/history-bikes",component:C}),Object(v.jsx)(r.a,{path:"/selected-date/:date",component:M})]}),Object(v.jsxs)("div",{className:"mt-4 mb-4 animate__animated animate__fadeIn",children:["Icons made by"," ",Object(v.jsx)("a",{href:"https://www.freepik.com",title:"Freepik",children:"Freepik"})," ","from"," ",Object(v.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(v.jsx)(k.Provider,{value:y,children:Object(v.jsx)(o.a,{children:Object(v.jsx)(H,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},72:function(t,e,a){}},[[125,1,2]]]);
//# sourceMappingURL=main.bb388c7a.chunk.js.map